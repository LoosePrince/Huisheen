# å›å£° (Huisheen)

<div align="center">

![å›å£°Logo](https://img.shields.io/badge/å›å£°-Huisheen-blue?style=for-the-badge)

[![GitHub stars](https://img.shields.io/github/stars/LoosePrince/Huisheen?style=social)](https://github.com/LoosePrince/Huisheen/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/LoosePrince/Huisheen?style=social)](https://github.com/LoosePrince/Huisheen/network/members)
[![GitHub issues](https://img.shields.io/github/issues/LoosePrince/Huisheen)](https://github.com/LoosePrince/Huisheen/issues)

[![Node.js](https://img.shields.io/badge/Node.js->=16.0.0-green?style=flat-square&logo=node.js)](https://nodejs.org/)
[![MongoDB](https://img.shields.io/badge/MongoDB-Database-green?style=flat-square&logo=mongodb)](https://www.mongodb.com/)
[![License](https://img.shields.io/badge/License-MIT-blue?style=flat-square)](LICENSE)
[![GitHub](https://img.shields.io/badge/GitHub-LoosePrince/Huisheen-black?style=flat-square&logo=github)](https://github.com/LoosePrince/Huisheen)

**ä¸“æ³¨äºé€šçŸ¥æ¥æ”¶çš„ç°ä»£åŒ–æœåŠ¡å¹³å°**

[å®˜ç½‘](https://your-demo-url.com) â€¢ [æ–‡æ¡£](docs/) â€¢ [APIå‚è€ƒ](#api-æ–‡æ¡£) â€¢ [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²)

</div>

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [éƒ¨ç½²](#éƒ¨ç½²)
- [APIæ–‡æ¡£](#api-æ–‡æ¡£)
- [é…ç½®è¯´æ˜](#é…ç½®è¯´æ˜)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸ¯ é¡¹ç›®ç®€ä»‹

å›å£°ï¼ˆHuisheenï¼‰æ˜¯ä¸€ä¸ªé€šçŸ¥æ¥æ”¶æœåŠ¡å¹³å°ã€‚å®ƒæä¾›äº†çµæ´»çš„é€šçŸ¥æ¥æ”¶æ–¹å¼ï¼Œæ”¯æŒç¬¬ä¸‰æ–¹åº”ç”¨é€šè¿‡å¤šç§æ¨¡å¼æ¨é€å’Œè·å–é€šçŸ¥ï¼ŒåŒæ—¶æä¾›äº†å®Œæ•´çš„ç”¨æˆ·ç®¡ç†å’Œå®‰å…¨éªŒè¯æœºåˆ¶ã€‚

### æ ¸å¿ƒç†å¿µ

- **ç®€å•æ˜“ç”¨**ï¼šæä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢å’Œç®€æ´çš„APIæ¥å£
- **å®‰å…¨å¯é **ï¼šå®Œå–„çš„èº«ä»½éªŒè¯å’Œæƒé™ç®¡ç†æœºåˆ¶
- **çµæ´»é›†æˆ**ï¼šæ”¯æŒå¤šç§é›†æˆæ¨¡å¼ï¼Œé€‚åº”ä¸åŒåº”ç”¨åœºæ™¯
- **ç°ä»£æ¶æ„**ï¼šåŸºäºç°ä»£WebæŠ€æœ¯ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ”„ é€šçŸ¥æ¥æ”¶æ¨¡å¼

- **ä¸»åŠ¨æ¨¡å¼**ï¼šç¬¬ä¸‰æ–¹åº”ç”¨ç›´æ¥æ¨é€é€šçŸ¥åˆ°å›å£°å¹³å°
- **è¢«åŠ¨æ¨¡å¼**ï¼šå›å£°å¹³å°è½®è¯¢ç¬¬ä¸‰æ–¹åº”ç”¨è·å–é€šçŸ¥
- **æ··åˆæ¨¡å¼**ï¼šåŒä¸€æœåŠ¡æ”¯æŒå¤šç§æ¨¡å¼å¹¶å­˜

### ğŸ›¡ï¸ å®‰å…¨ä¸è®¤è¯

- **JWTèº«ä»½éªŒè¯**ï¼šå®‰å…¨çš„ç”¨æˆ·è®¤è¯æœºåˆ¶
- **é€šçŸ¥æ ‡è¯†ç **ï¼šå”¯ä¸€çš„ç”¨æˆ·æ ‡è¯†å’ŒéªŒè¯ç ç³»ç»Ÿ
- **åŸŸåéªŒè¯**ï¼šæ™ºèƒ½çš„åŸŸååŒ¹é…å’Œç¯å¢ƒè¯†åˆ«
- **APIé™æµ**ï¼šé˜²æ­¢æ¶æ„è¯·æ±‚å’Œæ»¥ç”¨

### ğŸ“Š é€šçŸ¥ç®¡ç†

- **å®æ—¶é€šçŸ¥**ï¼šå³æ—¶æ¥æ”¶å’Œæ˜¾ç¤ºé€šçŸ¥
- **åˆ†ç±»ç­›é€‰**ï¼šæŒ‰ç±»å‹ã€ä¼˜å…ˆçº§ã€æ¥æºç­‰ç»´åº¦ç­›é€‰
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡æ ‡è®°å·²è¯»ã€åˆ é™¤ç­‰æ“ä½œ
- **ç»Ÿè®¡åˆ†æ**ï¼šè¯¦ç»†çš„é€šçŸ¥ç»Ÿè®¡å’Œåˆ†æåŠŸèƒ½

### ğŸ”Œ å¤–éƒ¨API

- **RESTful API**ï¼šæ ‡å‡†çš„REST APIæ¥å£
- **ç¬¬ä¸‰æ–¹é›†æˆ**ï¼šç®€åŒ–çš„ç¬¬ä¸‰æ–¹åº”ç”¨é›†æˆæµç¨‹
- **å›è°ƒæ”¯æŒ**ï¼šæ”¯æŒé€šçŸ¥å›è°ƒé“¾æ¥
- **æ•°æ®å¯¼å‡º**ï¼šæ”¯æŒé€šçŸ¥æ•°æ®çš„å¯¼å‡ºå’ŒåŒæ­¥

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

- **Node.js** - æœåŠ¡ç«¯è¿è¡Œç¯å¢ƒ
- **Express.js** - Webåº”ç”¨æ¡†æ¶
- **MongoDB** - NoSQLæ–‡æ¡£æ•°æ®åº“
- **Mongoose** - MongoDBå¯¹è±¡æ¨¡å‹åº“
- **JWT** - èº«ä»½è®¤è¯
- **Helmet** - å®‰å…¨ä¸­é—´ä»¶
- **CORS** - è·¨åŸŸèµ„æºå…±äº«
- **Express Rate Limit** - APIé™æµ

### å‰ç«¯æŠ€æœ¯

- **Vue.js 3** - å“åº”å¼å‰ç«¯æ¡†æ¶ï¼ˆCDNç‰ˆæœ¬ï¼‰
- **Tailwind CSS** - å®ç”¨ä¼˜å…ˆçš„CSSæ¡†æ¶ï¼ˆCDNç‰ˆæœ¬ï¼‰
- **Axios** - HTTPå®¢æˆ·ç«¯
- **Font Awesome** - å›¾æ ‡åº“

### å¼€å‘å·¥å…·

- **Nodemon** - å¼€å‘æ—¶è‡ªåŠ¨é‡å¯
- **Jest** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 16.0.0
- MongoDB >= 4.4
- npm æˆ– yarn

### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/LoosePrince/Huisheen.git
cd Huisheen
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®

```bash
# è‡ªåŠ¨ç”Ÿæˆ .env æ–‡ä»¶ï¼ˆæ¨èï¼‰
npm run setup

# æˆ–æ‰‹åŠ¨é…ç½®
cp config.env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

### 4. å¯åŠ¨åº”ç”¨

```bash
# å¼€å‘æ¨¡å¼
npm run dev

# ç”Ÿäº§æ¨¡å¼
npm start
```

### 5. è®¿é—®åº”ç”¨

- **ä¸»åº”ç”¨**ï¼šhttp://localhost:3000
- **APIæ–‡æ¡£**ï¼šhttp://localhost:3000/docs
- **å¥åº·æ£€æŸ¥**ï¼šhttp://localhost:3000/health

## ğŸŒ éƒ¨ç½²

### Railway ä¸€é”®éƒ¨ç½²

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/deploy?template=https://github.com/LoosePrince/Huisheen)

ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä¸€é”®éƒ¨ç½²åˆ°Railwayå¹³å°ã€‚

#### Railwayéƒ¨ç½²æ­¥éª¤

1. ç‚¹å‡»éƒ¨ç½²æŒ‰é’®
2. è¿æ¥ä½ çš„GitHubè´¦æˆ·
3. é…ç½®ç¯å¢ƒå˜é‡ï¼š
   - `MONGODB_URI`ï¼šMongoDBè¿æ¥å­—ç¬¦ä¸²
   - `JWT_SECRET`ï¼šJWTå¯†é’¥ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
   - `WEBSITE_DOMAIN`ï¼šä½ çš„åº”ç”¨åŸŸå
4. ç­‰å¾…éƒ¨ç½²å®Œæˆ

### Docker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t huisheen .

# è¿è¡Œå®¹å™¨
docker run -d \
  --name huisheen \
  -p 3000:3000 \
  -e MONGODB_URI="mongodb://your-mongo-uri" \
  -e JWT_SECRET="your-jwt-secret" \
  -e WEBSITE_DOMAIN="your-domain.com" \
  huisheen
```

### Docker Compose

```yaml
version: '3.8'
services:
  huisheen:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - MONGODB_URI=mongodb://mongo:27017/huisheen
      - JWT_SECRET=your_jwt_secret
      - WEBSITE_DOMAIN=your-domain.com
    depends_on:
      - mongo
    
  mongo:
    image: mongo:4.4
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: password123
    volumes:
      - mongodb_data:/data/db
    ports:
      - "27017:27017"

volumes:
  mongodb_data:
```

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

1. **å‡†å¤‡æœåŠ¡å™¨ç¯å¢ƒ**
   ```bash
   # å®‰è£… Node.js å’Œ MongoDB
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   sudo apt-get install -y nodejs mongodb
   ```

2. **éƒ¨ç½²åº”ç”¨**
   ```bash
   # å…‹éš†ä»£ç 
   git clone https://github.com/LoosePrince/Huisheen.git
   cd Huisheen
   
   # å®‰è£…ä¾èµ–
   npm install --production
   
   # é…ç½®ç¯å¢ƒ
   npm run setup
   
   # ç¼–è¾‘ç¯å¢ƒé…ç½®
   nano .env
   ```

## ğŸ“š API æ–‡æ¡£

### è®¤è¯ç›¸å…³

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /api/auth/register
Content-Type: application/json

{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç "
}
```

#### ç”¨æˆ·ç™»å½•
```http
POST /api/auth/login
Content-Type: application/json

{
  "username": "ç”¨æˆ·å",
  "password": "å¯†ç "
}
```

#### ç”Ÿæˆé€šçŸ¥æ ‡è¯†ç 
```http
POST /api/auth/generate-notify-code
Authorization: Bearer <token>
```

### è®¢é˜…ç®¡ç†

#### åˆ›å»ºä¸»åŠ¨è®¢é˜…
```http
POST /api/subscriptions/active/verify
Content-Type: application/json

{
  "notifyCode": "notify:user:xxxx-xxxx-xxxx:xxxxxx@domain.com",
  "thirdPartyName": "ç¬¬ä¸‰æ–¹æœåŠ¡åç§°",
  "thirdPartyUrl": "https://third-party.com"
}
```

#### åˆ›å»ºè¢«åŠ¨è®¢é˜…
```http
POST /api/subscriptions/passive
Authorization: Bearer <token>
Content-Type: application/json

{
  "apiUrl": "https://third-party.com/api/notifications"
}
```

### é€šçŸ¥ç®¡ç†

#### æ¥æ”¶é€šçŸ¥ï¼ˆä¸»åŠ¨æ¨¡å¼ï¼‰
```http
POST /api/notifications/receive
Content-Type: application/json

{
  "notifyId": "ç”¨æˆ·é€šçŸ¥ID",
  "token": "è®¢é˜…Token",
  "title": "é€šçŸ¥æ ‡é¢˜",
  "content": "é€šçŸ¥å†…å®¹",
  "type": "info|warning|error|success",
  "priority": "low|normal|high|urgent"
}
```

#### è·å–é€šçŸ¥åˆ—è¡¨
```http
GET /api/notifications?page=1&limit=20&type=info&isRead=false
Authorization: Bearer <token>
```

### å¤–éƒ¨API

#### è·å–è®¿é—®Token
```http
POST /api/external/auth
Content-Type: application/json

{
  "notifyCode": "notify:user:xxxx-xxxx-xxxx:xxxxxx@domain.com",
  "thirdPartyName": "åº”ç”¨åç§°",
  "thirdPartyUrl": "https://myapp.com"
}
```

#### è·å–æœªè¯»é€šçŸ¥
```http
GET /api/external/notifications?limit=20&type=warning
Authorization: Bearer <external_token>
```

æ›´å¤šAPIè¯¦æƒ…è¯·æŸ¥çœ‹ [APIæ–‡æ¡£](docs/API.md)

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…éœ€ | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `NODE_ENV` | å¦ | `development` | è¿è¡Œç¯å¢ƒ |
| `PORT` | å¦ | `3000` | æœåŠ¡ç«¯å£ |
| `MONGODB_URI` | **æ˜¯** | - | MongoDBè¿æ¥å­—ç¬¦ä¸² |
| `JWT_SECRET` | **æ˜¯** | - | JWTå¯†é’¥ |
| `JWT_EXPIRES_IN` | å¦ | `24h` | JWTè¿‡æœŸæ—¶é—´ |
| `WEBSITE_DOMAIN` | å¦ | `localhost:3000` | ç½‘ç«™åŸŸå |
| `RATE_LIMIT_WINDOW_MS` | å¦ | `900000` | é™æµæ—¶é—´çª—å£ï¼ˆæ¯«ç§’ï¼‰ |
| `RATE_LIMIT_MAX_REQUESTS` | å¦ | `100` | é™æµæœ€å¤§è¯·æ±‚æ•° |

### æ•°æ®åº“é…ç½®ç¤ºä¾‹

```env
# æœ¬åœ°MongoDBï¼ˆæ— è®¤è¯ï¼‰
MONGODB_URI=mongodb://localhost:27017/huisheen

# æœ¬åœ°MongoDBï¼ˆæœ‰è®¤è¯ï¼‰
MONGODB_URI=mongodb://username:password@localhost:27017/huisheen

# MongoDB Atlasï¼ˆäº‘æ•°æ®åº“ï¼‰
MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/huisheen

# Railway MongoDB
MONGODB_URI=${{MONGO_URL}}
```

### ç”Ÿäº§ç¯å¢ƒå®‰å…¨é…ç½®

1. **ä½¿ç”¨å¼ºJWTå¯†é’¥**
   ```bash
   # ç”Ÿæˆå®‰å…¨çš„JWTå¯†é’¥
   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
   ```

2. **é…ç½®æ­£ç¡®çš„åŸŸå**
   ```env
   WEBSITE_DOMAIN=your-production-domain.com
   ```

3. **å¯ç”¨MongoDBè®¤è¯**
   ```env
   MONGODB_URI=mongodb://admin:strong_password@your-mongo-server:27017/huisheen?authSource=admin
   ```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

### å¼€å‘ç¯å¢ƒè®¾ç½®

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. å®‰è£…ä¾èµ–ï¼š`npm install`
4. è®¾ç½®ç¯å¢ƒï¼š`npm run setup`
5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š`npm run dev`

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ES6+è¯­æ³•
- éµå¾ªeslinté…ç½®
- ç¼–å†™å¿…è¦çš„æµ‹è¯•ç”¨ä¾‹
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### æäº¤è§„èŒƒ

```bash
# åŠŸèƒ½æ·»åŠ 
git commit -m "feat: æ·»åŠ ç”¨æˆ·é€šçŸ¥åå¥½è®¾ç½®"

# é—®é¢˜ä¿®å¤
git commit -m "fix: ä¿®å¤é€šçŸ¥æ ‡è®°å·²è¯»çš„é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–°APIæ–‡æ¡£"
```

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œç‰¹å®šæµ‹è¯•
npm test -- --grep "é€šçŸ¥ç®¡ç†"

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage
```

## ğŸ“– æ–‡æ¡£

- [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)
- [å¼€å‘è€…æŒ‡å—](docs/developer-guide.md)
- [APIå‚è€ƒ](docs/API.md)
- [éƒ¨ç½²æŒ‡å—](DEPLOYMENT.md)
- [å¸¸è§é—®é¢˜](docs/FAQ.md)

## ğŸ› é—®é¢˜åé¦ˆ

å¦‚æœä½ å‘ç°äº†bugæˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [å·²çŸ¥é—®é¢˜](https://github.com/LoosePrince/Huisheen/issues)
2. åˆ›å»ºæ–°çš„ [Issue](https://github.com/LoosePrince/Huisheen/issues/new)
3. æä¾›è¯¦ç»†çš„é—®é¢˜æè¿°å’Œå¤ç°æ­¥éª¤

## ğŸ“ˆ è·¯çº¿å›¾

- [ ] æ”¯æŒWebSocketå®æ—¶æ¨é€
- [ ] æ·»åŠ é€šçŸ¥æ¨¡æ¿ç³»ç»Ÿ
- [ ] æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–
- [ ] æ·»åŠ é€šçŸ¥ç»Ÿè®¡å›¾è¡¨
- [ ] æ”¯æŒæ’ä»¶ç³»ç»Ÿ
- [ ] ç§»åŠ¨ç«¯PWAæ”¯æŒ

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼

ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼š
- [Express.js](https://expressjs.com/)
- [Vue.js](https://vuejs.org/)
- [MongoDB](https://www.mongodb.com/)
- [Tailwind CSS](https://tailwindcss.com/)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

---

<div align="center">

**Made with â¤ï¸ by the Huisheen Team**

[â¬† å›åˆ°é¡¶éƒ¨](#å›å£°-huisheen)

</div>
